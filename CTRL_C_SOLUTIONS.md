# è§£å†³ Ctrl+C æ— æ³•åœæ­¢ Next.js å¼€å‘æœåŠ¡å™¨çš„é—®é¢˜

## ğŸš¨ é—®é¢˜æè¿°

æœ‰æ—¶å€™åœ¨ç»ˆç«¯ä¸­æŒ‰ `Ctrl+C` æ— æ³•æ­£å¸¸åœæ­¢ Next.js å¼€å‘æœåŠ¡å™¨ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºï¼š

1. è¿›ç¨‹æ²¡æœ‰æ­£ç¡®å“åº” SIGINT ä¿¡å·
2. æœ‰å­è¿›ç¨‹ä»åœ¨è¿è¡Œ
3. ç«¯å£è¢«å…¶ä»–è¿›ç¨‹å ç”¨
4. ç»ˆç«¯ä¼šè¯é—®é¢˜

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªç®¡ç†è„šæœ¬ `manage-dev-server.sh`ï¼š

```bash
# æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
./manage-dev-server.sh status

# å¯åŠ¨æœåŠ¡å™¨
./manage-dev-server.sh start

# åœæ­¢æœåŠ¡å™¨
./manage-dev-server.sh stop

# é‡å¯æœåŠ¡å™¨
./manage-dev-server.sh restart

# å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
./manage-dev-server.sh kill
```

### æ–¹æ¡ˆ 2: æ‰‹åŠ¨ç»ˆç«¯æ“ä½œ

#### 2.1 å°è¯•ä¸åŒçš„ç»ˆæ­¢ä¿¡å·
```bash
# æ–¹æ³•1: æ ‡å‡†ä¸­æ–­
Ctrl+C

# æ–¹æ³•2: å¼ºåˆ¶é€€å‡º
Ctrl+\

# æ–¹æ³•3: æš‚åœåç»ˆæ­¢
Ctrl+Z    # æš‚åœè¿›ç¨‹
kill %1   # ç»ˆæ­¢åå°ä½œä¸š
```

#### 2.2 æŸ¥æ‰¾å¹¶ç»ˆæ­¢è¿›ç¨‹
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£3000çš„è¿›ç¨‹
lsof -i :3000

# ç»ˆæ­¢ç‰¹å®šPIDçš„è¿›ç¨‹
kill -9 <PID>

# æŸ¥æ‰¾Next.jsç›¸å…³è¿›ç¨‹
ps aux | grep next

# ç»ˆæ­¢æ‰€æœ‰Next.jsè¿›ç¨‹
pkill -f "next dev"
```

### æ–¹æ¡ˆ 3: ä½¿ç”¨ npm è„šæœ¬

åœ¨ `package.json` ä¸­æ·»åŠ åœæ­¢è„šæœ¬ï¼š

```json
{
  "scripts": {
    "dev": "next dev",
    "stop": "pkill -f 'next dev' || true"
  }
}
```

ç„¶åä½¿ç”¨ï¼š
```bash
npm run stop
```

### æ–¹æ¡ˆ 4: ä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨

#### 4.1 ä½¿ç”¨ PM2
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start npm --name "next-app" -- run dev

# åœæ­¢åº”ç”¨
pm2 stop next-app

# åˆ é™¤åº”ç”¨
pm2 delete next-app
```

#### 4.2 ä½¿ç”¨ nodemon
```bash
# å®‰è£…nodemon
npm install -g nodemon

# ä½¿ç”¨nodemonå¯åŠ¨
nodemon --exec "npm run dev"
```

## ğŸ” è¯Šæ–­å·¥å…·

### æ£€æŸ¥ç«¯å£å ç”¨
```bash
# macOS/Linux
lsof -i :3000

# Windows
netstat -ano | findstr :3000
```

### æ£€æŸ¥Node.jsè¿›ç¨‹
```bash
# æŸ¥çœ‹æ‰€æœ‰Node.jsè¿›ç¨‹
ps aux | grep node

# æŸ¥çœ‹Next.jsç›¸å…³è¿›ç¨‹
ps aux | grep next
```

### æ£€æŸ¥è¿›ç¨‹æ ‘
```bash
# æŸ¥çœ‹è¿›ç¨‹æ ‘
pstree -p <PID>

# æˆ–ä½¿ç”¨htop
htop
```

## ğŸš€ é¢„é˜²æªæ–½

### 1. ä½¿ç”¨æ­£ç¡®çš„å¯åŠ¨æ–¹å¼
```bash
# æ¨èï¼šä½¿ç”¨npm scripts
npm run dev

# é¿å…ï¼šç›´æ¥è¿è¡Œnext
npx next dev
```

### 2. è®¾ç½®ä¿¡å·å¤„ç†
åœ¨ä½ çš„ Next.js åº”ç”¨ä¸­æ·»åŠ ä¿¡å·å¤„ç†ï¼š

```javascript
// next.config.js
process.on('SIGINT', () => {
  console.log('æ”¶åˆ° SIGINT ä¿¡å·ï¼Œæ­£åœ¨å…³é—­æœåŠ¡å™¨...');
  process.exit(0);
});

process.on('SIGTERM', () => {
  console.log('æ”¶åˆ° SIGTERM ä¿¡å·ï¼Œæ­£åœ¨å…³é—­æœåŠ¡å™¨...');
  process.exit(0);
});
```

### 3. ä½¿ç”¨å¼€å‘ç¯å¢ƒé…ç½®
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export NODE_ENV=development

# å¯ç”¨è°ƒè¯•æ¨¡å¼
DEBUG=* npm run dev
```

## ğŸ“ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# å¿«é€Ÿåœæ­¢æ‰€æœ‰Node.jsè¿›ç¨‹ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
pkill node

# åœæ­¢ç‰¹å®šç«¯å£çš„è¿›ç¨‹
kill -9 $(lsof -ti:3000)

# æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ
netstat -tulpn | grep :3000

# é‡å¯ç½‘ç»œæœåŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰
sudo service networking restart
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä½¿ç”¨ `kill -9` è¦è°¨æ…**ï¼šè¿™ä¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±
2. **æ£€æŸ¥å…¶ä»–åº”ç”¨**ï¼šç¡®ä¿æ²¡æœ‰å…¶ä»–åº”ç”¨å ç”¨ç«¯å£3000
3. **é‡å¯ç»ˆç«¯**ï¼šæœ‰æ—¶å€™é‡å¯ç»ˆç«¯ä¼šè¯å¯ä»¥è§£å†³é—®é¢˜
4. **æ£€æŸ¥æƒé™**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„æƒé™ç»ˆæ­¢è¿›ç¨‹

## ğŸ¯ æ¨èå·¥ä½œæµ

1. ä¼˜å…ˆä½¿ç”¨ `./manage-dev-server.sh` è„šæœ¬
2. å¦‚æœè„šæœ¬ä¸å¯ç”¨ï¼Œå°è¯• `Ctrl+\`
3. æœ€åä½¿ç”¨ `kill -9` å¼ºåˆ¶ç»ˆæ­¢
4. é‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨

è¿™æ ·å¯ä»¥ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒå§‹ç»ˆå¤„äºå¯æ§çŠ¶æ€ï¼
